--- 
layout: post
title: Clojure and Selenium cov3 - part ii
categories: 
- clojure
- selenium
- automations
- webcrawler
---







<p>
Have been playing around with selenium and clojure for a while, and now that selenium 2 is in beta ended up making a little web crawler library called cov3.
</p>
<p>
<img src="http://al3xandr3.github.com/img/crawler.png" alt="http://al3xandr3.github.com/img/crawler.png" />
</p>
<p>
It has 3 flavors of crawling:
</p><ul>
<li>the usual crawler, give him a url, and keeps on going until he visits all of the linked pages (that point to same domain).
</li>
<li>a sitemap crawler, give him a sitemap.xml and visits the urls he finds in the sitemap.
</li>
<li>a step crawler, give him a csv file with the list of urls(steps) to visit.
</li>
</ul>

<p>
On each page the crawler visits it executes a bit of javascript code that we can define as a validation.
These validations are usefull to test your site in an automated way, say for example, you want to check:
</p><ul>
<li>if all pages contain meta tags
</li>
<li>if all pages contain a title
</li>
<li>if you have web analytics tracking in all pages
</li>
<li>find out what links are broken
</li>
<li>test your own javascript in an automated way in all
  pages.
</li>
<li>etc..
</li>
</ul>

<p>
Also allows to use, for the crawling, either Firefox, Internet Explorer(when on windows), Chrome or HtmlUnit(a GUI-Less browser).
</p>

<div class="outline-2" id="outline-container-1">
<h2 id="sec-1">Usage </h2>
<div class="outline-text-2" id="text-1">





<pre class="src src-clojure">(<span style="color: #7a378b;">require</span> '[cov3 <span style="color: #7a378b;">:as</span> cov3])

<span style="color: #b22222;">;; </span><span style="color: #b22222;">then (:ff is short for firefox, use :hu for HtmlUnit, 
</span><span style="color: #b22222;">;; </span><span style="color: #b22222;">:ch for Chrome, and :ie for Internet Explorer)
</span>(cov3/crawl <span style="color: #7a378b;">:ff</span> <span style="color: #8b2252;">"http://al3xandr3.github.com/"</span> '(<span style="color: #8b2252;">"document.title"</span>))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">or (10 is the sample size to pick from sitemap.xml)
</span>(cov3/sitemap-crawl <span style="color: #7a378b;">:ff</span> <span style="color: #8b2252;">"http://al3xandr3.github.com/sitemap.xml"</span> <span style="color: #8b2252;">""</span> <span style="color: #8b2252;">""</span> 10 '(<span style="color: #8b2252;">"document.title"</span>))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">or (assuming you have a csv file with the steps to take, see more on documentation)
</span><span style="color: #b22222;">;; </span><span style="color: #b22222;">for example the line: http://al3xandr3.github.com/,"document.title",,
</span>(cov3/step-crawl <span style="color: #7a378b;">:ff</span> <span style="color: #8b2252;">"data/steps.csv"</span>)
</pre>



<p>
Is available from github: <a href="http://github.com/al3xandr3/cov3">http://github.com/al3xandr3/cov3</a>
</p></div>
</div>
<div id="postamble">

</div>
